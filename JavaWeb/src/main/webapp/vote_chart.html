<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>投票圖表</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css">
		<link rel="stylesheet" href="/JavaWeb/css/buttons.css">
	</head>
	<body style="padding: 20px">
		<div class="pure-form">
			<fieldset>
				<legend>投票統計</legend>
				<span class="button-error pure-button" id="recall">罷免</span> 0 票 
				<span class="button-success pure-button" id="nonrecall">反罷</span> 0 票 
			</fieldset>
		</div>
		<p />
		<div class="pure-form">
			<fieldset>
				<legend>圖表統計</legend>
				<table>
					<tr>
						<td valign="top">
							<div id="chart1"></div>
						</td>
						<td valign="top">
							<div id="chart2"></div>
						</td>
					</tr>
				</table>
			</fieldset>
		</div>
	</body>
	<script type="text/javascript">
		const recall = document.getElementById('recall');
		const nonrecall = document.getElementById('nonrecall');
		
		var ws = null;		
		function setWebSocket() {
			const wsurl = 'ws://localhost:8080/JavaWeb/vote/server';
			// 建立 WebSocket Client
			ws = new WebSocket(wsurl);
			ws.onopen = function() {
				
			};
			ws.onclose = function() {
				
			};
			ws.onmessage = function(event) {
				
			};
			ws.onerror = function(event) {
				
			};
		}
		
		//  啟動 ws
		setWebSocket();
		
		// 關閉網頁時會自動斷開 WebSocket 連線
		window.addEventListener('beforeunload', function() {
			ws.close();
		});
	
	</script>
	
</html>