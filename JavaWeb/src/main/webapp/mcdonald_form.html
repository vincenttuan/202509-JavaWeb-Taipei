<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>éº¥ç•¶å‹</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css">
		<link rel="stylesheet" href="/JavaWeb/css/buttons.css">
		<!-- å¼•å…¥ SweetAlert2 CDN -->
    	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
		<script>
			// æ‡‰ä»˜é‡‘é¡
			let total = 0;
			
			// é©—è­‰é‡‘é¡
			function validateAmount() {
				// å–å¾—ä»˜æ¬¾é‡‘é¡
				let amount = document.getElementById('amount').value;
				amount = parseInt(amount);
				// åˆ¤æ–·
				if(amount < total) {
					alert('ä»˜æ¬¾é‡‘é¡ä¸è¶³:\nä¸è¶³é‡‘é¡ $' + (total - amount));
					return false;
				} else {
					return true;
				}
			}
			
			// è¨ˆç®—æ‡‰ä»˜é‡‘é¡
			function calculateTotal() {
				// å–å¾—é¸ä¸­çš„ä¸»é¤åƒ¹æ ¼
				let mainmeal = document.querySelector('input[name="mainmeal"]:checked').value;
				// å–å¾—é¸ä¸­çš„å‰¯é¤åƒ¹æ ¼
				let sidemeal = document.querySelector('input[name="sidemeal"]:checked').value;
				// å–å¾—é¸ä¸­çš„é£²æ–™åƒ¹æ ¼
				let beverage = document.querySelector('input[name="beverage"]:checked').value;
				// è¨ˆç®—æ‡‰ä»˜é‡‘é¡
				total = parseInt(mainmeal) + parseInt(sidemeal) + parseInt(beverage);
				// å°‡æ‡‰ä»˜é‡‘é¡é¡¯ç¤ºåœ¨ <span id="totalPrice"></span> æ¨™ç±¤ä¸­
				document.getElementById('totalPrice').innerText = total;
			}	
			
			// ç¶²é è¼‰å…¥å®Œæˆæ™‚æ‰€æœƒåŸ·è¡Œçš„æ–¹æ³•
			window.onload = function() {
				// é‡å°æ¯ä¸€å€‹ radio åŠ å…¥ change äº‹ä»¶
				let radios = document.querySelectorAll('input[type="radio"]');
				radios.forEach(function(radio) {
					radio.addEventListener('change', calculateTotal);
				});
				calculateTotal();
			};
		</script>
	</head>
	<body style="padding: 20px">
		<form class="pure-form" action="/JavaWeb/mcdonald" onsubmit="return validateAmount();">
			<fieldset>
				<legend>ğŸ” éº¥ç•¶å‹é»é¤ ğŸŸ</legend>
				<table>
					<tr>
						<td valign="top">
							ä¸»é¤:<p />
							<input type="radio" name="mainmeal" value="70" checked /> ğŸ” å¤§éº¥å…‹($70) <p />
							<input type="radio" name="mainmeal" value="49" /> ğŸŸ éº¥é¦™é­š($49) <p />
							<input type="radio" name="mainmeal" value="45" /> ğŸ— éº¥é¦™é›($45) <p />
							<input type="radio" name="mainmeal" value="40" /> ğŸ§€ å‰äº‹æ¼¢å ¡($40) <p />
							<input type="radio" name="mainmeal" value="85" /> ğŸŒ¶ï¸ å‹è¾£é›è…¿å ¡($85) <p />
						</td>
						<td valign="top">
							å‰¯é¤:<p />
							<input type="radio" name="sidemeal" value="60" checked /> ğŸŸ å¤§è–¯($60)<p />
							<input type="radio" name="sidemeal" value="40" /> ğŸŸ å°è–¯($40)<p />
							<input type="radio" name="sidemeal" value="45" /> ğŸ¥§ è˜‹æœæ´¾($45)<p />
							<input type="radio" name="sidemeal" value="50" /> ğŸ¦ å†°ç‚«é¢¨($50)<p />
						</td>
						<td valign="top">
							é£²æ–™:<p />
							<input type="radio" name="beverage" value="30" checked /> ğŸ¥¤ å¤§å¯æ¨‚($30)<p />
							<input type="radio" name="beverage" value="30" /> ğŸ¥¤ å¤§é›ªç¢§($30)<p />
							<input type="radio" name="beverage" value="40" /> â˜• å†°å’–å•¡($40)<p />
							<input type="radio" name="beverage" value="55" /> ğŸŒ½ ç‰ç±³æ¹¯($55)<p />
						</td>
					</tr>
					<tr>
						<td colspan="3">
							æ‡‰ä»˜é‡‘é¡ ğŸ’µ: <span id="totalPrice">0</span><p /> 
							ä»˜æ¬¾é‡‘é¡ ğŸ’µ: <input type="number" id="amount" name="amount" placeholder="è«‹è¼¸å…¥ä»˜æ¬¾é‡‘é¡" 
										  min="1"  required /><p />
							<button class="button-success pure-button" type="submit">è¨‚é¤ ğŸ˜‹</button>
							<button class="button-error pure-button" type="submit">è¨‚é¤ ğŸ˜‹</button>
							<button class="button-warning pure-button" type="submit">è¨‚é¤ ğŸ˜‹</button>
							<button class="button-secondary pure-button" type="submit">è¨‚é¤ ğŸ˜‹</button>
							<button class="pure-button pure-button-primary" type="submit">è¨‚é¤ ğŸ˜‹</button>
							<button class="pure-button pure-button-active" type="submit">è¨‚é¤ ğŸ˜‹</button>
							<button class="pure-button pure-button-disabled" type="submit">è¨‚é¤ ğŸ˜‹</button>
						</td>
					</tr>
				</table>
			</fieldset>
		</form>
	</body>
</html>